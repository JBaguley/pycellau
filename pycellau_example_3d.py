import pycellau

class Spreader(pycellau.Cell3D):
    on = "O"
    off = "#"
    def update(self, model):
        counter = 0
        for i in range(9):
            if model.getGrid()[(self.y-1+(i//3))%model.y][(self.x-1+(i%3))%model.x].s == self.on:
                counter += 1
        if self.s == self.off and counter > 0:
            self.s = self.on

seed = [
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","O","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
    ["#","#","#","#","#","#","#","#","#","#"],
]

pycellau.run3D(10, 10, Spreader, seed, 1)
